# ðŸš„ Deploy Talaqqi Academy ke Railway.app

Railway adalah platform deployment yang perfect untuk Next.js + Prisma + Database. Tidak ada size limit! 

## Step 1: Buat Account Railway

1. Go to https://railway.app
2. Click "Start free" atau "Login"
3. Sign up dengan GitHub account
4. Authorize Railway untuk akses GitHub

## Step 2: Create New Project

1. Di Railway dashboard, click **"New Project"**
2. Pilih **"Deploy from GitHub repo"**
3. Search dan select: `talaqqi-academy`
4. Click **"Deploy Now"**

Railway akan otomatis:
- âœ… Detect Next.js
- âœ… Setup Node.js environment
- âœ… Run `npm install`
- âœ… Run `npm run build`
- âœ… Deploy ke Railway

## Step 3: Setup Database (PostgreSQL)

Railway provides PostgreSQL out of the box!

1. Di Railway project, click **"+ New"**
2. Select **"Database"** â†’ **"PostgreSQL"**
3. Railway akan create PostgreSQL instance otomatis

## Step 4: Configure Environment Variables

Railway auto-generates database URL. Kita perlu set additional env vars:

1. Go to your Railway project
2. Click **"Variables"** tab
3. Add:

```
DATABASE_URL = <auto-generated dari PostgreSQL>
NEXTAUTH_SECRET = ZlHBE6Es95TXzi7vP9eFQ8o5JUHG94SYbJQBIPFfKw0=
NEXTAUTH_URL = https://your-railway-url.railway.app
NODE_ENV = production
```

## Step 5: Update Local DATABASE_URL

Jika perlu test local dengan PostgreSQL:

```bash
# Install PostgreSQL (macOS)
brew install postgresql

# Start PostgreSQL
brew services start postgresql

# Update .env.local
DATABASE_URL="postgresql://user:password@localhost:5432/talaqqi"
```

Atau gunakan online service:
- Neon.tech (free PostgreSQL)
- Supabase
- Railway PostgreSQL (recommended)

## Step 6: Update Prisma Schema (optional)

Kalau sebelumnya SQLite, perlu update ke PostgreSQL:

```prisma
// prisma/schema.prisma
datasource db {
  provider = "postgresql"  // Changed from "sqlite"
  url      = env("DATABASE_URL")
}
```

Then:
```bash
npx prisma migrate deploy
npx prisma db push
```

## Step 7: Monitor Deployment

Railway dashboard akan show:
- âœ… Build logs
- âœ… Deployment status  
- âœ… Live URL
- âœ… Environment variables
- âœ… Database connection

## Step 8: Custom Domain (optional)

1. In Railway project settings
2. Go to **"Domains"**
3. Add custom domain
4. Update DNS records

---

## ðŸ“Š Railway Pricing

| Plan | Price | Include |
|------|-------|---------|
| **Free Tier** | $0 | 500 hours/month + $5 credit |
| **Pro** | $5+/month | Unlimited hours + storage |

Your app will use ~730 hours/month if always on.
Free tier = 500 hours = can deploy but will sleep some hours.

**Recommendation:** Pay $5/month for Production tier (unlimited)

---

## ðŸ”„ Auto-Deployment from GitHub

Once connected to GitHub, Railway will:
- âœ… Auto-deploy on every push to `main`
- âœ… Build automatically
- âœ… Zero downtime deployments
- âœ… Automatic rollback if build fails

---

## âš¡ Quick Start Script

```bash
# 1. Update Prisma for PostgreSQL
sed -i '' 's/provider = "sqlite"/provider = "postgresql"/' prisma/schema.prisma

# 2. Commit
git add .
git commit -m "switch: database from SQLite to PostgreSQL for Railway"
git push origin main

# 3. Railway will auto-deploy!
```

---

## ðŸ†˜ Troubleshooting

### "Build failed: Cannot find module"
- Solution: Make sure `package.json` dependencies are correct
- Run: `npm install` locally and verify

### "Database connection error"
- Solution: Check DATABASE_URL in Environment Variables
- Make sure PostgreSQL is running/deployed

### "Static files not found (404)"
- Solution: Make sure `public/` folder is in `.next/standalone/`
- Check build script in `package.json`

---

## Deployment URL

Once deployed, Railway will provide:
```
https://your-project-name-production.railway.app
```

Live at that URL! ðŸŽ‰

